<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>Layla - Genshin Impact</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Desktop Mode Modal */
        .desktop-mode-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0.3s, opacity 0.3s;
        }
        .desktop-mode-modal.show {
            visibility: visible;
            opacity: 1;
        }
        .desktop-mode-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            color: white;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        .desktop-mode-modal.show .desktop-mode-content {
            transform: scale(1);
        }
        .desktop-mode-icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .desktop-mode-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #ffffff;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }
        .desktop-mode-message {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #f8f9fa;
            opacity: 0.95;
        }
        .desktop-mode-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .desktop-mode-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            min-width: 160px;
        }
        .btn-force-desktop {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }
        .btn-force-desktop:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }
        .btn-continue-mobile {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        .btn-continue-mobile:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        .desktop-mode-warning {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            font-size: 14px;
            border-left: 4px solid #ffd93d;
            color: #fff3cd;
            font-weight: 500;
        }

        /* Force Desktop Mode Styles */
        body.force-desktop-mode {
            min-width: 1200px;
            overflow-x: auto;
        }
        body.force-desktop-mode * {
            box-sizing: border-box;
        }
        .force-desktop-mode nav {
            flex-direction: row !important;
            padding: 16px 48px !important;
        }
        .force-desktop-mode .nav-center {
            display: flex !important;
        }
        .force-desktop-mode .search-container {
            width: 300px !important;
            margin-left: 20px !important;
        }
        .force-desktop-mode .hero-container {
            flex-direction: row !important;
            padding: 48px !important;
            text-align: left !important;
        }
        .force-desktop-mode .hero-text-container {
            position: absolute !important;
            left: 100px !important;
            top: 140px !important;
            max-width: 50% !important;
        }
        .force-desktop-mode .hero-image-container {
            right: -200px !important;
            left: auto !important;
            width: 50% !important;
            height: 600px !important;
            min-width: 400px !important;
            bottom: 20% !important;
        }
        .force-desktop-mode .hero-heading {
            font-size: 92px !important;
        }
        .force-desktop-mode .hero-subheading {
            font-size: 24px !important;
        }
        .force-desktop-mode .main-content {
            grid-template-columns: 1fr 1fr 1fr !important;
            padding: 48px !important;
        }
        .force-desktop-mode .arrow-nav {
            display: flex !important;
        }

        /* Dynamic Color Themes */
        :root {
            --bg: #f6f8fb;
            --muted-bg: #eef2f8;
            --hero-start: #7fa4d9;
            --hero-end: #6b89c6;
            --accent: #5D5CDE;
            --text-primary: #1a202c;
            --text-muted: #4a5568;
            --white: #ffffff;
            --card-bg: var(--white);
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            --border-color: rgba(95, 111, 176, 0.05);
            --element-primary: #5D5CDE;
            --element-secondary: #7fa4d9;
            --element-accent: #a8d8ea;
            --gradient-start: #4fd3ff;
            --gradient-end: #a8d8ea;
        }
        
        body.theme-cryo {
            --accent: #4fd3ff;
            --element-primary: #4fd3ff;
            --element-secondary: #a8d8ea;
            --element-accent: #e0f6ff;
            --hero-start: #4fd3ff;
            --hero-end: #a8d8ea;
            --gradient-start: #4fd3ff;
            --gradient-end: #a8d8ea;
        }
        
        body.theme-geo {
            --accent: #f7c52d;
            --element-primary: #f7c52d;
            --element-secondary: #feca57;
            --element-accent: #fff4d6;
            --hero-start: #f7c52d;
            --hero-end: #feca57;
            --gradient-start: #f7c52d;
            --gradient-end: #feca57;
        }
        
        body.theme-dendro {
            --accent: #8bc34a;
            --element-primary: #8bc34a;
            --element-secondary: #a5d96a;
            --element-accent: #e8f5e8;
            --hero-start: #8bc34a;
            --hero-end: #a5d96a;
            --gradient-start: #8bc34a;
            --gradient-end: #a5d96a;
        }
        
        body.dark-mode {
            --bg: #181818;
            --muted-bg: #2d3748;
            --hero-start: #4a69a0;
            --hero-end: #3d5a80;
            --text-primary: #f7fafc;
            --text-muted: #cbd5e0;
            --white: #2d3748;
            --card-bg: #2d3748;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            --border-color: rgba(144, 205, 244, 0.1);
        }
        
        body.dark-mode.theme-cryo {
            --bg: #0f1419;
            --muted-bg: #1a2332;
        }
        
        body.dark-mode.theme-geo {
            --bg: #1a1611;
            --muted-bg: #2d2518;
        }
        
        body.dark-mode.theme-dendro {
            --bg: #0f1a0f;
            --muted-bg: #1a2d1a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.5s ease, color 0.5s ease;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 1000;
            transition: opacity 0.4s ease;
            opacity: 1;
            overflow: hidden;
            animation: gradientShift 6s ease-in-out infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .loading-screen.fade-out {
            opacity: 0;
            transform: scale(1.05);
        }
        
        .loading-container {
            text-align: center;
            z-index: 2;
            position: relative;
        }
        
        .loading-spinner {
            width: 100px;
            height: 100px;
            position: relative;
            margin-bottom: 40px;
            display: inline-block;
        }
        
        .loading-spinner::before,
        .loading-spinner::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            animation: spinnerRotate 1.8s linear infinite;
        }
        
        .loading-spinner::before {
            width: 100px;
            height: 100px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top-color: #fff;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
        }
        
        .loading-spinner::after {
            width: 70px;
            height: 70px;
            top: 15px;
            left: 15px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-bottom-color: #feca57;
            animation: spinnerRotate 1.2s linear infinite reverse;
            box-shadow: 0 0 20px rgba(254, 202, 87, 0.3);
        }
        
        @keyframes spinnerRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 2.2rem;
            color: #ffffff;
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.6), 0 2px 4px rgba(0, 0, 0, 0.4);
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        .loading-subtitle {
            font-size: 1.1rem;
            color: #f8f9fa;
            margin-bottom: 50px;
            font-weight: 500;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .progress-container {
            width: 350px;
            height: 8px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b 0%, #feca57 25%, #48dbfb 50%, #ff9ff3 75%, #a8e6cf 100%);
            background-size: 300% 100%;
            border-radius: 15px;
            width: 0%;
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: progressGradient 2s linear infinite;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.6), 0 0 25px rgba(72, 219, 251, 0.4);
        }
        
        @keyframes progressGradient {
            0% { background-position: 0% 0%; }
            100% { background-position: -300% 0%; }
        }
        
        .progress-text {
            color: #ffffff;
            font-size: 1rem;
            font-weight: 600;
            opacity: 0.95;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Particles System */
        .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }
        
        .particle.cryo {
            color: #a8d8ea;
            font-size: 12px;
            animation: cryoFloat 6s linear infinite;
        }
        
        .particle.cryo::before {
            content: '❄️';
        }
        
        .particle.cryo:nth-child(odd)::before {
            content: '⭐';
        }
        
        .particle.cryo:nth-child(3n)::before {
            content: '💎';
        }
        
        @keyframes cryoFloat {
            0% { transform: translateY(100vh) rotate(0deg) scale(0); opacity: 0; }
            10% { opacity: 1; transform: translateY(90vh) rotate(36deg) scale(1); }
            90% { opacity: 1; transform: translateY(10vh) rotate(324deg) scale(1); }
            100% { transform: translateY(-10vh) rotate(360deg) scale(0); opacity: 0; }
        }
        
        .particle.geo {
            color: #feca57;
            font-size: 14px;
            animation: geoFloat 5s ease-in-out infinite;
        }
        
        .particle.geo::before {
            content: '🔥';
        }
        
        .particle.geo:nth-child(even)::before {
            content: '✨';
        }
        
        .particle.geo:nth-child(3n)::before {
            content: '💫';
        }
        
        @keyframes geoFloat {
            0% { transform: translateY(100vh) translateX(0) rotate(0deg) scale(0.5); opacity: 0; }
            20% { opacity: 1; transform: translateY(80vh) translateX(20px) rotate(72deg) scale(1); }
            50% { transform: translateY(50vh) translateX(-20px) rotate(180deg) scale(1.2); }
            80% { opacity: 1; transform: translateY(20vh) translateX(10px) rotate(288deg) scale(1); }
            100% { transform: translateY(-10vh) translateX(0) rotate(360deg) scale(0.5); opacity: 0; }
        }
        
        .particle.dendro {
            color: #26d0ce;
            font-size: 16px;
            animation: dendroFloat 8s ease-in-out infinite;
        }
        
        .particle.dendro::before {
            content: '🍃';
        }
        
        .particle.dendro:nth-child(even)::before {
            content: '🌿';
        }
        
        .particle.dendro:nth-child(3n)::before {
            content: '🍂';
        }
        
        @keyframes dendroFloat {
            0% { transform: translateY(100vh) translateX(-50px) rotate(0deg) scale(0.8); opacity: 0; }
            15% { opacity: 1; transform: translateY(85vh) translateX(-30px) rotate(45deg) scale(1); }
            35% { transform: translateY(65vh) translateX(30px) rotate(135deg) scale(1.1); }
            55% { transform: translateY(45vh) translateX(-20px) rotate(225deg) scale(1); }
            75% { transform: translateY(25vh) translateX(40px) rotate(315deg) scale(1.1); }
            90% { opacity: 1; transform: translateY(10vh) translateX(-10px) rotate(405deg) scale(1); }
            100% { transform: translateY(-10vh) translateX(0) rotate(450deg) scale(0.8); opacity: 0; }
        }

        /* Navigation */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 48px;
            position: relative;
            z-index: 10;
            background-color: var(--card-bg);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--muted-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.4s ease;
            position: relative;
        }
        
        .plus-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--accent);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .plus-btn:hover {
            background-color: var(--element-primary);
            transform: translateY(-2px);
        }
        
        .nav-center {
            display: flex;
            gap: 32px;
            align-items: center;
        }
        
        .nav-link {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: color 0.4s ease;
            position: relative;
        }
        
        .nav-link.active {
            color: var(--accent);
            font-weight: 600;
        }
        
        .nav-right {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 9999px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.4s ease;
            border: none;
            outline: none;
            position: relative;
        }
        
        .btn-outline {
            border: 1.5px solid var(--accent);
            background-color: transparent;
            color: var(--accent);
            font-weight: 600;
        }
        
        .btn-outline:hover {
            background-color: var(--element-accent);
            transform: translateY(-2px);
        }
        
        .btn-filled {
            background-color: var(--accent);
            color: var(--white);
            box-shadow: 0 4px 12px rgba(93, 92, 222, 0.2);
            font-weight: 600;
        }
        
        .btn-filled:hover {
            background-color: var(--element-primary);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(93, 92, 222, 0.3);
        }
        
        .search-container {
            position: relative;
            width: 300px;
            margin-left: 20px;
        }
        
        .search-container input {
            width: 100%;
            padding: 10px 16px;
            border-radius: 20px;
            border: 2px solid var(--border-color);
            background: linear-gradient(135deg, var(--gradient-start), rgba(255, 255, 255, 0.9), var(--gradient-end));
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.4s ease;
            outline: none;
            font-weight: 500;
        }
        
        .search-container input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--element-accent);
            background-color: var(--card-bg);
        }
        
        .search-suggestions {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            width: 100%;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            z-index: 100;
            overflow: hidden;
        }
        
        .search-suggestions a {
            display: block;
            padding: 12px 16px;
            text-decoration: none;
            color: var(--text-primary);
            transition: background-color 0.3s ease;
            border-bottom: 1px solid var(--border-color);
            font-weight: 500;
        }
        
        .search-suggestions a:last-child {
            border-bottom: none;
        }
        
        .search-suggestions a:hover {
            background-color: var(--muted-bg);
            color: var(--accent);
        }
        
        .dark-mode-toggle, .audio-toggle {
            cursor: pointer;
            font-size: 24px;
            transition: transform 0.4s ease;
        }
        
        .dark-mode-toggle:hover, .audio-toggle:hover {
            transform: scale(1.1);
        }

        /* Replay Button */
        .replay-btn {
            position: fixed;
            bottom: 320px;
            right: 90px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--element-primary));
            color: var(--white);
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 16px var(--element-accent);
            z-index: 50;
            transition: all 0.4s ease;
        }
        
        .replay-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px var(--element-accent);
        }

        /* Hero Section */
        .hero-container {
            max-width: 1200px;
            margin: 48px auto;
            position: relative;
            padding: 48px;
            border-radius: 24px;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            min-height: 480px;
            overflow: hidden;
            transition: background-image 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .small-image-container {
            position: absolute;
            top: -25px;
            left: 20px;
            z-index: 7;
        }
        
        .small-image-container img {
            width: 110px;
            height: 110px;
            object-fit: contain;
        }
        
        .hero-text-container {
            position: absolute;
            z-index: 5;
            color: #fff;
            left: 100px;
            top: 140px;
            max-width: 50%;
        }
        
        .hero-heading {
            font-size: 92px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #ffffff;
            text-shadow: 0 6px 16px rgba(0, 0, 0, 0.8), 0 3px 8px rgba(0, 0, 0, 0.6), 0 0 20px rgba(0, 0, 0, 0.4);
            letter-spacing: -1px;
        }
        
        .hero-subheading {
            font-size: 24px;
            line-height: 1.4;
            opacity: 1;
            min-height: 1.2em;
            color: #f8f9fa;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.9), 0 2px 6px rgba(0, 0, 0, 0.7);
            font-weight: 500;
        }
        
        .hero-image-container {
            position: absolute;
            right: -200px;
            left: auto;
            transform: translateX(-50%);
            bottom: 20%;
            width: 50%;
            max-width: 500px;
            min-width: 400px;
            height: 600px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            z-index: 6;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .hero-image {
            width: 100%;
            height: 100%;
            display: block;
            margin: -40px;
            object-fit: contain;
            object-position: bottom;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,.15));
            opacity: 1;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            max-height: 600px;
            min-height: 500px;
        }
        
        @keyframes heroSlideInRight {
            from { opacity: 0; transform: translateX(100px) scale(0.9); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }
        
        @keyframes heroSlideInLeft {
            from { opacity: 0; transform: translateX(-100px) scale(0.9); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }
        
        @keyframes heroSlideInUp {
            from { opacity: 0; transform: translateY(60px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .hero-image.slide-right {
            animation: heroSlideInRight 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        .hero-image.slide-left {
            animation: heroSlideInLeft 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        .hero-image.slide-up {
            animation: heroSlideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        .hero-buttons {
            position: absolute;
            z-index: 5;
            bottom: 40px;
            left: 48px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .read-more {
            display: inline-block;
            padding: 15px 16px;
            border-radius: 999px;
            border: 2px solid rgba(255,255,255,.25);
            background: rgba(255,255,255,.08);
            color: #ffffff;
            text-decoration: none;
            font-weight: 700;
            position: relative;
            transition: all 0.3s ease;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .read-more:hover {
            background: var(--element-accent);
            border-color: var(--element-primary);
            transform: translateY(-2px);
            color: var(--text-primary);
            text-shadow: none;
        }
        
        .arrow-nav {
            position: absolute;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            cursor: pointer;
            z-index: 8;
            transition: all 0.3s ease;
            backdrop-filter: blur(6px);
        }
        
        .arrow-nav.left {
            left: 15px;
            top: 65%;
            transform: translateY(-50%);
        }
        
        .arrow-nav.right {
            right: 15px;
            top: 65%;
            transform: translateY(-50%);
        }
        
        .arrow-nav:hover {
            background-color: var(--element-accent);
            transform: translateY(-50%) scale(1.05);
        }
        
        .progress {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
        
        .dot {
            height: 12px;
            width: 12px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            display: inline-block;
            transition: all 0.4s ease;
        }
        
        .dot.active {
            background-color: #fff;
            width: 30px;
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 48px auto;
            padding: 48px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 48px;
            background: linear-gradient(135deg, 
                var(--element-accent) 0%, 
                var(--element-secondary) 25%,
                rgba(154, 108, 143, 0.08) 50%,
                rgba(188, 122, 116, 0.06) 75%,
                rgba(222, 136, 89, 0.04) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid var(--element-primary);
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        body.dark-mode .main-content {
            background: linear-gradient(135deg, 
                rgba(26, 32, 56, 0.4) 0%, 
                rgba(41, 37, 74, 0.3) 25%,
                rgba(56, 42, 92, 0.2) 50%,
                rgba(71, 47, 110, 0.15) 75%,
                rgba(86, 52, 128, 0.1) 100%);
            border: 1px solid var(--element-primary);
        }
        
        .main-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, var(--element-accent) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, var(--element-secondary) 0%, transparent 50%),
                radial-gradient(circle at 60% 80%, var(--element-primary) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
            opacity: 0.3;
        }

        /* ENHANCED ANIMATIONS FOR EACH ELEMENT */
        .animate-from-left {
            opacity: 0;
            transform: translateX(-80px);
            transition: opacity 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .animate-from-left.is-visible {
            opacity: 1;
            transform: translateX(0);
        }
        
        .animate-fade-down {
            opacity: 0;
            transform: translateY(-60px);
            transition: opacity 1.4s cubic-bezier(0.23, 1, 0.32, 1), transform 1.4s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .animate-fade-down.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .animate-scale-fade {
            opacity: 0;
            transform: scale(0.8) translateY(30px);
            transition: opacity 1.3s cubic-bezier(0.34, 1.56, 0.64, 1), transform 1.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .animate-scale-fade.is-visible {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
        
        .animate-slide-right {
            opacity: 0;
            transform: translateX(100px);
            transition: opacity 1.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 1.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .animate-slide-right.is-visible {
            opacity: 1;
            transform: translateX(0);
        }
        
        .animate-stagger-up {
            opacity: 0;
            transform: translateY(60px) scale(0.95);
            transition: opacity 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .animate-stagger-up.is-visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        
        .animate-float {
            animation: gentle-float 3s ease-in-out infinite;
        }
        
        @keyframes gentle-float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Artwork Column */
        .artwork-column {
            display: flex;
            flex-direction: column;
            gap: 24px;
            position: relative;
            z-index: 2;
        }
        
        .section-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .artwork-card {
            background: linear-gradient(135deg, var(--gradient-start), rgba(255, 255, 255, 0.9), var(--gradient-end));
            border-radius: 16px;
            padding: 16px;
            box-shadow: var(--card-shadow);
            transition: transform 0.5s ease, box-shadow 0.5s ease, background 0.5s ease;
            cursor: pointer;
        }
        
        .artwork-card img {
            width: 100%;
            height: 160px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 12px;
        }
        
        .artwork-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 20px var(--element-accent);
        }
        
        .artwork-byline {
            font-size: 14px;
            color: black;
            font-weight: 500;
        }
        
        .view-more-btn {
            align-self: flex-start;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--gradient-start), rgba(255, 255, 255, 0.8), var(--gradient-end));
            color: var(--text-primary);
            border-radius: 9999px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.4s ease;
            margin-top: 16px;
            position: relative;
        }
        
        .view-more-btn:hover {
            background: linear-gradient(135deg, var(--element-primary), rgba(255, 255, 255, 0.9), var(--element-secondary));
            transform: translateY(-2px);
        }

        /* Stat Bar */
        .stat-bar-container {
            background: linear-gradient(135deg, #1a1f3a 0%, #2d3561 50%, #1a1f3a 100%);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--element-primary);
            position: relative;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .stat-bar-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 30%, var(--element-accent) 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, var(--element-secondary) 0%, transparent 50%);
            opacity: 0.1;
            pointer-events: none;
        }
        
        .stat-bar-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }
        
        .character-name {
            font-size: 28px;
            font-weight: 800;
            color: var(--element-primary);
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            margin-bottom: 4px;
            letter-spacing: 2px;
            text-transform: uppercase;
            background: linear-gradient(135deg, var(--element-primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .character-code {
            font-size: 14px;
            color: #a0a8e6;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        .character-rarity {
            display: flex;
            gap: 4px;
            margin-bottom: 8px;
        }
        
        .character-rarity .star {
            color: #ffd700;
            font-size: 16px;
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
            animation: starTwinkle 2s ease-in-out infinite;
            animation-delay: calc(var(--i) * 0.2s);
        }
        
        .character-rarity .star:nth-child(1) { --i: 0; }
        .character-rarity .star:nth-child(2) { --i: 1; }
        .character-rarity .star:nth-child(3) { --i: 2; }
        .character-rarity .star:nth-child(4) { --i: 3; }
        .character-rarity .star:nth-child(5) { --i: 4; }
        
        @keyframes starTwinkle {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        .stat-bars {
            display: flex;
            flex-direction: column;
            gap: 14px;
            position: relative;
            z-index: 2;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .stat-label {
            min-width: 60px;
            font-size: 14px;
            font-weight: 600;
            color: #e0e6ff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .stat-bar-bg {
            flex: 1;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--stat-color-start), var(--stat-color-end));
            border-radius: 10px;
            position: relative;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px var(--stat-glow);
        }
        
        .stat-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: statShimmer 2s ease-in-out infinite;
        }
        
        @keyframes statShimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }
        
        .stat-value {
            min-width: 50px;
            font-size: 16px;
            font-weight: 700;
            color: #ffffff;
            text-align: right;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
        }
        
        .stat-item:nth-child(1) .stat-bar-fill {
            --stat-color-start: #ff6b6b;
            --stat-color-end: #ff5252;
            --stat-glow: rgba(255, 107, 107, 0.4);
        }
        
        .stat-item:nth-child(2) .stat-bar-fill {
            --stat-color-start: #4ecdc4;
            --stat-color-end: #26d0ce;
            --stat-glow: rgba(78, 205, 196, 0.4);
        }
        
        .stat-item:nth-child(3) .stat-bar-fill {
            --stat-color-start: #45b7d1;
            --stat-color-end: #3498db;
            --stat-glow: rgba(69, 183, 209, 0.4);
        }
        
        .stat-item:nth-child(4) .stat-bar-fill {
            --stat-color-start: #96ceb4;
            --stat-color-end: #85c1a6;
            --stat-glow: rgba(150, 206, 180, 0.4);
        }
        
        .stat-footer {
            margin-top: 16px;
            text-align: center;
            position: relative;
            z-index: 2;
        }
        
        .stat-footer-text {
            font-size: 12px;
            color: #7a8bff;
            font-weight: 500;
            letter-spacing: 1px;
            opacity: 0.8;
        }
        
        .stat-bar-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            border-color: var(--accent);
        }
        
        .stat-item:hover .stat-bar-fill {
            box-shadow: 0 0 20px var(--stat-glow);
        }

        /* Search Column */
        .search-column {
            display: flex;
            flex-direction: column;
            gap: 24px;
            position: relative;
            z-index: 2;
        }
        
        .search-chips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
            padding: 16px;
            background: linear-gradient(135deg, var(--gradient-start), rgba(255, 255, 255, 0.9), var(--gradient-end));
            border-radius: 16px;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.03);
            opacity: 1;
            transform: translateY(0);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .search-chip {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px 12px 16px;
            background-color: var(--card-bg);
            border-radius: 9999px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            box-shadow: var(--card-shadow);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            transform: translateY(0);
            z-index: 1;
            text-decoration: none;
        }
        
        .search-chip:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px var(--element-accent);
        }
        
        .search-chip.active {
            background-color: var(--accent);
            color: var(--white);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 6px 16px var(--element-accent);
            transform: translateY(-2px);
            font-weight: 600;
        }
        
        .search-icon {
            width: 18px;
            height: 18px;
            fill: currentColor;
            transition: transform 0.5s ease;
        }
        
        .search-chip:hover .search-icon {
            transform: scale(1.1);
        }
        
        .horizontal-banner {
            width: 80%;
            max-width: 100%;
            border-radius: 5px;
            margin-top: -30px;
            bottom: 70px;
            box-shadow: var(--card-shadow);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            cursor: pointer;
            opacity: 1;
            transform: translateY(0);
        }
        
        .horizontal-banner:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px var(--element-accent);
        }
        
        .banner-image {
            width: 100%;
            height: auto;
            top: 70px;
            display: block;
            object-fit: cover;
            transition: opacity 0.4s ease;
        }
        
        .horizontal-image-section {
            margin-top: -20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            opacity: 1;
            transform: translateY(0);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .horizontal-image-card {
            position: relative;
            width: 100%;
            height: 200px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: transform 0.5s ease, box-shadow 0.5s ease;
            cursor: pointer;
            opacity: 1;
            transform: translateY(0);
        }
        
        .horizontal-image-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .horizontal-image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
            padding: 24px 20px 16px;
            transform: translateY(0);
            transition: transform 0.5s ease;
        }
        
        .horizontal-image-overlay h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
        }
        
        .horizontal-image-overlay p {
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.4;
            color: #f8f9fa;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
        }
        
        .horizontal-image-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px var(--element-accent);
        }
        
        .horizontal-image-card:hover img {
            transform: scale(1.05);
        }
        
        .horizontal-image-card:hover .horizontal-image-overlay {
            transform: translateY(-4px);
        }
        
        .additional-image-section {
            margin-top: 20px;
            width: 100%;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: transform 0.5s ease, box-shadow 0.5s ease;
            cursor: pointer;
            opacity: 1;
            transform: translateY(0);
        }
        
        .additional-image-section img {
            width: 100%;
            height: 200px;
            object-fit: contain;
            transition: transform 0.5s ease;
        }
        
        .additional-image-section:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px var(--element-accent);
        }
        
        .additional-image-section:hover img {
            transform: scale(1.05);
        }

        /* Info Column */
        .info-column {
            display: flex;
            flex-direction: column;
            gap: 24px;
            position: relative;
            z-index: 2;
        }
        
        .icon-cards-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 16px;
            max-width: 200px;
            padding: 16px;
            background: linear-gradient(135deg, var(--gradient-start), rgba(255, 255, 255, 0.9), var(--gradient-end));
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 2;
        }
        
        .icon-card {
            position: relative;
            width: 80px;
            height: 80px;
            background-color: var(--element-primary);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px var(--element-accent);
            cursor: pointer;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            flex-shrink: 0;
        }
        
        .icon-card img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .icon-card:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 8px 16px var(--element-accent);
        }
        
        .icon-card.highlighted {
            transform: scale(1.15) translateY(-8px);
            box-shadow: 0 12px 24px var(--element-accent);
            z-index: 10;
            position: relative;
        }
        
        .icon-card.dimmed {
            transform: scale(0.85);
            opacity: 0.6;
            filter: grayscale(50%);
        }
        
        .close-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: white;
            color: #555;
            font-size: 16px;
            font-weight: bold;
            line-height: 25px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0.8);
        }
        
        .icon-card:hover .close-btn {
            opacity: 1;
            transform: scale(1);
        }
        
        .icon-card.show-close .close-btn {
            opacity: 1;
            transform: scale(1);
        }
        
        .close-btn:hover {
            background-color: #eee;
        }
        
        .info-cards {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 8px;
            padding: 16px;
            background: linear-gradient(135deg, var(--gradient-start), rgba(255, 255, 255, 0.9), var(--gradient-end));
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .info-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 14px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), var(--element-accent), rgba(255, 255, 255, 0.9));
            border-radius: 18px;
            box-shadow: var(--card-shadow);
            transition: transform 0.5s ease, box-shadow 0.5s ease, background 0.5s ease;
            transform-style: preserve-3d;
            position: relative;
            backdrop-filter: blur(5px);
        }
        
        .info-card .info-img {
            width: 64px;
            height: 64px;
            flex: 0 0 64px;
            object-fit: contain;
            border-radius: 12px;
        }
        
        .info-card .info-text {
            flex: 1;
            min-width: 0;
        }
        
        .info-card .info-title {
            font-weight: 600;
            font-size: 16px;
            color: black;
            margin-bottom: 6px;
        }
        
        .info-card .info-description {
            font-size: 14px;
            color: black;
            line-height: 1.4;
            font-weight: 500;
        }
        
        .share-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        
        .share-buttons a {
            color: black;
            font-size: 20px;
            transition: color 0.4s ease;
        }
        
        .share-buttons a:hover {
            color: var(--accent);
        }

        /* Lightbox */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0.5s, opacity 0.5s;
        }
        
        .lightbox.active {
            visibility: visible;
            opacity: 1;
        }
        
        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }
        
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Back-to-top button */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--accent);
            color: var(--white);
            border: none;
            display: none;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 50;
        }

        /* Footer */
        .interactive-footer {
            margin-top: 80px;
            background: linear-gradient(135deg, 
                var(--element-accent) 0%, 
                var(--element-secondary) 25%,
                rgba(154, 108, 143, 0.10) 50%,
                rgba(188, 122, 116, 0.08) 75%,
                rgba(222, 136, 89, 0.05) 100%);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-top: 2px solid var(--element-primary);
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        body.dark-mode .interactive-footer {
            background: linear-gradient(135deg, 
                rgba(26, 32, 56, 0.6) 0%, 
                rgba(41, 37, 74, 0.5) 25%,
                rgba(56, 42, 92, 0.4) 50%,
                rgba(71, 47, 110, 0.3) 75%,
                rgba(86, 52, 128, 0.2) 100%);
            border-top: 2px solid var(--element-primary);
        }
        
        .interactive-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, var(--element-accent) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, var(--element-secondary) 0%, transparent 50%),
                radial-gradient(circle at 60% 80%, var(--element-primary) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 48px 50px;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 60px;
            position: relative;
            z-index: 2;
        }
        
        .footer-section {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .footer-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .footer-title {
            font-size: 38px;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 20px;
            background: linear-gradient(135deg, 
                var(--element-primary) 0%, 
                var(--element-secondary) 25%, 
                var(--accent) 50%, 
                var(--element-primary) 75%, 
                var(--element-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            text-shadow: 0 2px 8px var(--element-accent);
        }
        
        .footer-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), transparent);
            border-radius: 2px;
            box-shadow: 0 2px 8px var(--element-accent);
        }
        
        .footer-subtitle {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 24px;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .footer-subtitle::before {
            content: '✦';
            position: absolute;
            left: -20px;
            top: 0;
            color: var(--accent);
            font-size: 14px;
            animation: twinkle 2s ease-in-out infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .footer-subtitle::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--element-accent), transparent);
            border-radius: 2px;
        }
        
        .footer-description {
            color: var(--text-muted);
            line-height: 1.8;
            margin-bottom: 30px;
            font-size: 16px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            font-weight: 500;
        }
        
        .social-links {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .social-link {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: var(--element-accent);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            font-size: 22px;
            text-decoration: none;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--element-primary);
        }
        
        .social-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent), var(--element-primary), var(--element-secondary));
            transition: left 0.5s ease;
            z-index: -1;
        }
        
        .social-link:hover::before {
            left: 0;
        }
        
        .social-link:hover {
            color: white;
            transform: translateY(-6px) scale(1.15);
            box-shadow: 0 10px 30px var(--element-accent);
            border-color: var(--element-primary);
        }
        
        .footer-nav {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .footer-link {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.4s ease;
            position: relative;
            padding: 10px 0;
            padding-left: 20px;
        }
        
        .footer-link::before {
            content: '▸';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: all 0.4s ease;
            color: var(--accent);
        }
        
        .footer-link::after {
            content: '';
            position: absolute;
            left: 20px;
            bottom: 8px;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent), var(--element-primary));
            transition: width 0.4s ease;
        }
        
        .footer-link:hover::before {
            opacity: 1;
            transform: translateY(-50%) translateX(5px);
        }
        
        .footer-link:hover::after {
            width: calc(100% - 20px);
        }
        
        .footer-link:hover {
            color: var(--accent);
            transform: translateX(10px);
            text-shadow: 0 2px 4px var(--element-accent);
        }
        
        .contact-info {
            margin-bottom: 30px;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            color: var(--text-muted);
            font-size: 15px;
            transition: all 0.3s ease;
            padding: 8px;
            border-radius: 8px;
            font-weight: 500;
        }
        
        .contact-item:hover {
            background: var(--element-accent);
            transform: translateX(5px);
        }
        
        .contact-item i {
            width: 24px;
            color: var(--accent);
            font-size: 18px;
            text-shadow: 0 2px 4px var(--element-accent);
        }
        
        .feedback-btn {
            background: linear-gradient(135deg, var(--accent) 0%, var(--element-primary) 50%, var(--element-secondary) 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 15px;
            box-shadow: 0 6px 20px var(--element-accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .feedback-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }
        
        .feedback-btn:hover::before {
            left: 100%;
        }
        
        .feedback-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px var(--element-accent);
        }
        
        .footer-bottom {
            background: rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(15px);
            border-top: 1px solid var(--element-primary);
            padding: 30px 48px;
            position: relative;
        }
        
        body.dark-mode .footer-bottom {
            background: rgba(0, 0, 0, 0.25);
            border-top: 1px solid var(--element-primary);
        }
        
        .footer-bottom-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 25px;
        }
        
        .copyright {
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.6;
            font-weight: 500;
        }
        
        .footer-links {
            display: flex;
            gap: 30px;
        }
        
        .footer-link-small {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .footer-link-small::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--accent);
            transition: width 0.3s ease;
        }
        
        .footer-link-small:hover::after {
            width: 100%;
        }
        
        .footer-link-small:hover {
            color: var(--accent);
            text-shadow: 0 2px 4px var(--element-accent);
        }
        
        .footer-decoration {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .floating-element {
            position: absolute;
            font-size: 24px;
            opacity: 0.7;
            animation: genshinFloat var(--duration) ease-in-out infinite;
            animation-delay: var(--delay);
            color: var(--accent);
            text-shadow: 0 2px 8px var(--element-accent);
        }
        
        .floating-element:nth-child(1) { top: 15%; left: 8%; --duration: 6s; --delay: 0s; }
        .floating-element:nth-child(2) { top: 45%; right: 12%; --duration: 8s; --delay: 2s; }
        .floating-element:nth-child(3) { top: 75%; left: 65%; --duration: 7s; --delay: 4s; }
        .floating-element:nth-child(4) { top: 25%; left: 75%; --duration: 9s; --delay: 1s; }
        .floating-element:nth-child(5) { top: 65%; left: 25%; --duration: 5s; --delay: 3s; }
        
        @keyframes genshinFloat {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); opacity: 0.7; }
            25% { transform: translateY(-25px) rotate(90deg) scale(1.1); opacity: 0.9; }
            50% { transform: translateY(-15px) rotate(180deg) scale(0.9); opacity: 1; }
            75% { transform: translateY(-30px) rotate(270deg) scale(1.2); opacity: 0.8; }
        }

        /* Voice Character Button */
        .voice-character-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--element-primary));
            color: white;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 16px var(--element-accent);
            z-index: 50;
            transition: all 0.4s ease;
            animation: pulse-voice 3s infinite;
        }
        
        .voice-character-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px var(--element-accent);
        }
        
        .voice-character-btn.playing {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            animation: voice-playing 1s ease-in-out infinite;
        }
        
        @keyframes pulse-voice {
            0% { box-shadow: 0 4px 16px var(--element-accent); }
            50% { box-shadow: 0 6px 20px var(--element-accent); }
            100% { box-shadow: 0 4px 16px var(--element-accent); }
        }
        
        @keyframes voice-playing {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            nav { padding: 16px 24px; }
            .search-container { width: 250px; }
            .hero-container { padding: 32px; gap: 32px; }
            .hero-heading { font-size: 56px; }
            .hero-subheading { font-size: 20px; }
            .hero-image-container { max-width: 400px; min-width: 300px; height: 500px; bottom: 20px; }
            .hero-image { min-height: 400px; max-height: 500px; }
            .main-content { padding: 24px; gap: 32px; }
            .icon-cards-container { justify-content: center; gap: 8px; }
            .icon-card { width: 70px; height: 70px; }
            .horizontal-image-card, .additional-image-section { height: 180px; }
        }
        
        @media (max-width: 768px) {
            nav { flex-direction: column; gap: 16px; padding: 16px; }
            .nav-left, .nav-right { width: 100%; justify-content: space-between; }
            .nav-center { display: none; }
            .search-container { width: 100%; margin-left: 0; }
            .hero-container { flex-direction: column; padding: 32px 24px; gap: 24px; text-align: center; }
            .hero-text-container { position: static; text-align: center; margin-bottom: 24px; max-width: 100%; }
            .hero-image-container { width: 240px; right: 16px; left: 230px; height: 350px; min-width: 200px; bottom: 30px; }
            .hero-image { width: 100%; max-width: 240px; min-height: 250px; max-height: 350px; }
            .arrow-nav { display: none; }
            .main-content { grid-template-columns: 1fr; padding: 16px; }
            .artwork-column, .search-column, .info-column { margin-top: 24px; }
            .artwork-card { width: 100%; max-width: 300px; height: auto; }
            .hero-heading { font-size: 35px; }
            .hero-subheading { font-size: 20px; margin-bottom: 20px; }
            .icon-cards-container { justify-content: center; gap: 6px; }
            .icon-card { width: 60px; height: 60px; }
            .icon-card img { width: 45px; height: 45px; }
            .horizontal-image-card, .additional-image-section { height: 150px; }
            .stat-bar-container { padding: 16px; }
            .character-name { font-size: 24px; }
            .stat-label { min-width: 50px; font-size: 13px; }
            .stat-value { font-size: 14px; min-width: 45px; }
            .stat-bar-bg { height: 18px; }
            .footer-content { grid-template-columns: 1fr; gap: 40px; padding: 50px 24px 35px; }
            .footer-bottom { padding: 25px 24px; }
            .footer-bottom-content { flex-direction: column; text-align: center; gap: 20px; }
            .footer-links { flex-wrap: wrap; justify-content: center; gap: 20px; }
            .social-links { justify-content: center; }
            .voice-character-btn { width: 50px; height: 50px; font-size: 20px; bottom: 130px; }
            .footer-title { font-size: 32px; }
            .footer-subtitle { font-size: 18px; }
        }
        
        /* Focus styles for accessibility */
        button:focus, a:focus, .search-chip:focus, .arrow-nav:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Desktop Mode Modal -->
    <div class="desktop-mode-modal" id="desktop-mode-modal">
        <div class="desktop-mode-content">
            <div class="desktop-mode-icon">💻</div>
            <h2 class="desktop-mode-title">Desktop Mode Required</h2>
            <p class="desktop-mode-message">
                Untuk pengalaman terbaik, website ini dioptimalkan untuk mode desktop. 
                Silakan beralih ke mode desktop atau gunakan perangkat desktop untuk akses penuh.
            </p>
            <div class="desktop-mode-buttons">
                <button class="desktop-mode-btn btn-force-desktop" id="force-desktop-btn">
                    🖥️ Paksa Mode Desktop
                </button>
                <button class="desktop-mode-btn btn-continue-mobile" id="continue-mobile-btn">
                    📱 Lanjut Mobile
                </button>
            </div>
            <div class="desktop-mode-warning">
                ⚠️ Mode mobile mungkin memiliki tampilan dan fitur yang terbatas
            </div>
            <button style="margin-top: 10px; padding: 5px 10px; font-size: 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; border-radius: 5px; cursor: pointer;" onclick="resetDesktopModePreference()">
                🔄 Reset Preferensi (Testing)
            </button>
        </div>
    </div>

    <!-- Loading Screen -->
    <div class="loading-screen">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <h2 class="loading-text">Loading Genshin Impact</h2>
            <p class="loading-subtitle">Preparing your adventure...</p>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div class="progress-text" id="progress-text">0%</div>
        </div>
    </div>

    <audio id="background-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="hover-sound" src="https://www.soundjay.com/buttons/button-1.mp3"></audio>

    <nav>
        <div class="nav-left">
            <div class="avatar" data-tooltip="User Profile">👤</div>
            <button class="plus-btn" data-tooltip="Add New">+</button>
        </div>
        <div class="nav-center">
            <a href="#" class="nav-link" data-tooltip="Go to Homepage">Home</a>
            <a href="#" class="nav-link active" data-tooltip="Search anything">Search</a>
            <a href="#" class="nav-link" data-tooltip="Check messages">Message</a>
            <div class="search-container">
                <input type="text" id="search-bar" placeholder="Cari..." aria-label="Cari di website">
                <div id="search-suggestions" class="search-suggestions" style="display: none;"></div>
            </div>
        </div>
        <div class="nav-right">
            <button class="btn btn-outline" data-tooltip="Login to your account">Log in</button>
            <button class="btn btn-filled" data-tooltip="Sign up for free">Sign up</button>
            <button id="dark-mode-toggle" class="dark-mode-toggle" aria-label="Toggle dark mode">🌙</button>
            <button id="audio-toggle" class="audio-toggle" aria-label="Toggle background music">🔊</button>
        </div>
    </nav>

    <section class="hero-container" id="hero-section">
        <div class="particles-container" id="particles-container"></div>
        <div class="small-image-container">
            <img src="assets/images/wm.webp" alt="Small icon logo">
        </div>
        <div class="hero-text-container">
            <h1 class="hero-heading"></h1>
            <p class="hero-subheading"></p>
        </div>
        <div class="hero-buttons">
            <a class="read-more" href="#">Read More</a>
            <div class="progress">
                <span class="dot active"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
        </div>
        <div class="hero-image-container">
            <img src="" alt="banner" class="hero-image" loading="lazy">
        </div>
        <div class="two-button">
            <button class="arrow-nav left" aria-label="Previous slide">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 19L8 12L15 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
            <button class="arrow-nav right" aria-label="Next slide">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 5L16 12L9 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
        </div>
    </section>

    <main class="main-content">
        <section class="artwork-column animate-from-left">
            <span class="section-label">Artwork ›</span>
            <div class="artwork-card" data-lightbox-src="assets/images/artwork1.webp">
                <img src="assets/images/artwork1.webp" alt="Artwork by @fukocchi" loading="lazy">
                <p class="artwork-byline">by @fukocchi</p>
            </div>
            <div class="artwork-card" data-lightbox-src="assets/images/artwork2.webp">
                <img src="assets/images/artwork2.webp" alt="Artwork by @ellenChain" loading="lazy">
                <p class="artwork-byline">by @ellenChain</p>
            </div>
            <button class="view-more-btn">View More</button>
            
            <div class="stat-bar-container animate-scale-fade" id="stat-bar-container">
                <div class="stat-bar-header">
                    <div class="character-name" id="stat-character-name"></div>
                    <div class="character-code" id="stat-character-code"></div>
                    <div class="character-rarity" id="stat-character-rarity">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                </div>
                <div class="stat-bars" id="stat-bars"></div>
                <div class="stat-footer">
                    <span class="stat-footer-text">—点击任意处继续—</span>
                </div>
            </div>
        </section>

        <section class="search-column animate-fade-down">
            <h2 class="section-label">Recent Search</h2>
            <div class="search-chips animate-scale-fade" id="search-chips-container" role="list"></div>
            <div class="horizontal-banner animate-scale-fade" id="horizontal-banner">
                <img src="assets/images/banner.webp" alt="Character Banner" class="banner-image">
            </div>
            <div class="horizontal-image-section animate-slide-right" id="horizontal-image-section">
                <span class="section-label">Featured Content</span>
                <div class="horizontal-image-card" id="horizontal-image-card"></div>
            </div>
            <div class="additional-image-section animate-slide-right" id="additional-image-section"></div>
        </section>

        <section class="info-column animate-stagger-up">
            <div class="icon-cards-container animate-float">
                <div class="icon-card" style="background-color: #005b8f;">
                    <span class="close-btn">&times;</span>
                    <img src="assets/images/wanderer1.webp" alt="Cryo character icon" loading="lazy">
                </div>
                <div class="icon-card" style="background-color: #5f6fb0;">
                    <span class="close-btn">&times;</span>
                    <img src="assets/images/wanderer2.webp" alt="Sumeru icon" loading="lazy">
                </div>
                <div class="icon-card" style="background-color: #F5DEB3;">
                    <span class="close-btn">&times;</span>
                    <img src="assets/images/navia1.webp" alt="Geo character icon" loading="lazy">
                </div>
                <div class="icon-card" style="background-color: #FFD700;">
                    <span class="close-btn">&times;</span>
                    <img src="assets/images/navia2.webp" alt="Electro character icon" loading="lazy">
                </div>
                <div class="icon-card" style="background-color: #3CB371;">
                    <span class="close-btn">&times;</span>
                    <img src="assets/images/alhaitam1.webp" alt="Pyro character icon" loading="lazy">
                </div>
                <div class="icon-card" style="background-color: #228B22;">
                    <span class="close-btn">&times;</span>
                    <img src="assets/images/alhaitam2.webp" alt="Dendro character icon" loading="lazy">
                </div>
            </div>
            
            <div class="info-cards animate-stagger-up" id="info-cards-container"></div>
        </section>
    </main>

    <div id="lightbox" class="lightbox">
        <span class="lightbox-close">&times;</span>
        <img src="" alt="Zoomed artwork" class="lightbox-content">
    </div>

    <button id="back-to-top" class="back-to-top" aria-label="Back to top">&uarr;</button>
    <button id="replay-animations" class="replay-btn" aria-label="Replay all animations" title="Replay Animations">🔄</button>

    <footer class="interactive-footer">
        <div class="footer-content">
            <div class="footer-section animate-from-left">
                <h3 class="footer-title">Genshin Impact</h3>
                <p class="footer-description">
                    Teyvat—a fantasy world where the seven elements flow and converge. 
                    In the distant past, the Archons granted mortals unique elemental abilities. 
                    With divine blessings, they gained the power to guide the elements at will.
                </p>
                <div class="social-links">
                    <a href="https://lynk.id/_ruangdigital" class="social-link" data-tooltip="Follow on Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://lynk.id/_ruangdigital" class="social-link" data-tooltip="Like on Facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://lynk.id/_ruangdigital" class="social-link" data-tooltip="Subscribe on YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://lynk.id/_ruangdigital" class="social-link" data-tooltip="Join Discord">
                        <i class="fab fa-discord"></i>
                    </a>
                    <a href="https://lynk.id/_ruangdigital" class="social-link" data-tooltip="Follow on Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>
            <div class="footer-section">
                <h4 class="footer-subtitle">Quick Links</h4>
                <nav class="footer-nav">
                    <a href="#" class="footer-link">Game Guide</a>
                    <a href="#" class="footer-link">Characters</a>
                    <a href="#" class="footer-link">Events</a>
                    <a href="#" class="footer-link">News</a>
                    <a href="#" class="footer-link">Community</a>
                    <a href="#" class="footer-link">Support</a>
                </nav>
            </div>
            <div class="footer-section">
                <h4 class="footer-subtitle">Contact & Support</h4>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>yamanakainojin333@gmail.com</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-globe"></i>
                        <span>genshin.mihoyo.kikir.com</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-headset"></i>
                        <span>24/7 Customer Support</span>
                    </div>
                </div>
                <a href="https://wa.me/6282125061754?text=Websitenya%20keren%20banget%20rating%20100/100%20❤️❤️🤩🥰%20sayang%20atmin❤️❤️🥰" target="_blank">
                <button class="feedback-btn" id="feedback-btn">
                    <i class="fas fa-comment"></i>
                    Send Feedback
                </button>
                </a>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <div class="copyright">
                    <p>&copy; 2024 miHoYo Co., Ltd. All Rights Reserved.</p>
                    <p>Genshin Impact and miHoYo are trademarks of miHoYo Co., Ltd.</p>
                </div>
                <div class="footer-links">
                    <a href="#" class="footer-link-small">Privacy Policy</a>
                    <a href="#" class="footer-link-small">Terms of Service</a>
                    <a href="#" class="footer-link-small">Cookie Policy</a>
                </div>
            </div>
        </div>
        <div class="footer-decoration">
            <div class="floating-element">✨</div>
            <div class="floating-element">⭐</div>
            <div class="floating-element">🌟</div>
            <div class="floating-element">💫</div>
            <div class="floating-element">⚡</div>
        </div>
    </footer>

    <button id="voice-character-btn" class="voice-character-btn" aria-label="Play character voice" title="Hear character voice">🎤</button>

    <script>
        // Desktop Mode Detection and Control
        function isMobileDevice() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            const mobileRegex = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;
            const screenWidth = window.innerWidth <= 768;
            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            return mobileRegex.test(userAgent) || (screenWidth && hasTouch);
        }

        function showDesktopModeModal() {
            const modal = document.getElementById('desktop-mode-modal');
            modal.classList.add('show');
        }

        function hideDesktopModeModal() {
            const modal = document.getElementById('desktop-mode-modal');
            modal.classList.remove('show');
        }

        function forceDesktopMode() {
            const viewportMeta = document.getElementById('viewport-meta');
            viewportMeta.setAttribute('content', 'width=1200, initial-scale=0.5, user-scalable=yes');
            document.body.classList.add('force-desktop-mode');
            localStorage.setItem('desktop-mode-preference', 'desktop');
            localStorage.setItem('force-desktop-mode', 'true');
            hideDesktopModeModal();
        }

        function continueWithMobile() {
            localStorage.setItem('desktop-mode-preference', 'mobile');
            hideDesktopModeModal();
        }

        function checkDesktopMode() {
            const preference = localStorage.getItem('desktop-mode-preference');
            if (preference === 'desktop') {
                forceDesktopMode();
                return;
            }
            if (isMobileDevice() && preference !== 'mobile') {
                setTimeout(() => {
                    showDesktopModeModal();
                }, 1000);
            }
        }

        function resetDesktopModePreference() {
            localStorage.removeItem('desktop-mode-preference');
            localStorage.removeItem('force-desktop-mode');
            location.reload();
        }

        document.getElementById('force-desktop-btn').addEventListener('click', forceDesktopMode);
        document.getElementById('continue-mobile-btn').addEventListener('click', continueWithMobile);
        document.getElementById('desktop-mode-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                continueWithMobile();
            }
        });

        // Loading Progress Bar System
        function simulateLoading() {
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            let progress = 0;
            const loadingSteps = [
                { progress: 25, text: "Loading characters..." },
                { progress: 50, text: "Initializing elements..." },
                { progress: 75, text: "Preparing animations..." },
                { progress: 95, text: "Loading assets..." },
                { progress: 100, text: "Ready!" }
            ];
            let stepIndex = 0;
            
            const interval = setInterval(() => {
                progress += Math.random() * 20 + 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                }
                progressBar.style.width = progress + '%';
                progressText.textContent = Math.floor(progress) + '%';
                
                while (stepIndex < loadingSteps.length && progress >= loadingSteps[stepIndex].progress) {
                    document.querySelector('.loading-subtitle').textContent = loadingSteps[stepIndex].text;
                    stepIndex++;
                }
                
                if (progress >= 100) {
                    setTimeout(() => {
                        const loadingScreen = document.querySelector('.loading-screen');
                        loadingScreen.classList.add('fade-out');
                        setTimeout(() => {
                            loadingScreen.remove();
                        }, 400);
                    }, 300);
                }
            }, 80);
        }

        // Dynamic Color Theme System
        function setElementTheme(elementType) {
            document.body.classList.remove('theme-cryo', 'theme-geo', 'theme-dendro');
            document.body.classList.add(`theme-${elementType}`);
            
            const nav = document.querySelector('nav');
            const heroContainer = document.querySelector('.hero-container');
            const footer = document.querySelector('.interactive-footer');
            
            [nav, heroContainer, footer].forEach(element => {
                if (element) {
                    element.style.transition = 'all 0.5s ease';
                }
            });
        }

        // Particle System
        class ParticleSystem {
            constructor(container) {
                this.container = container;
                this.particles = [];
                this.elementTypes = ['cryo', 'geo', 'dendro'];
                this.currentElement = 'cryo';
                this.isActive = false;
            }

            setElement(elementType) {
                this.currentElement = elementType;
                this.clearParticles();
                if (this.isActive) {
                    this.startParticles();
                }
            }

            createParticle() {
                const particle = document.createElement('div');
                particle.className = `particle ${this.currentElement}`;
                const randomX = Math.random() * 100;
                particle.style.left = randomX + '%';
                const duration = this.getElementDuration();
                const delay = Math.random() * 2;
                particle.style.animationDuration = duration + 's';
                particle.style.animationDelay = delay + 's';
                this.container.appendChild(particle);
                this.particles.push(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                        this.particles = this.particles.filter(p => p !== particle);
                    }
                }, (duration + delay) * 1000);
            }

            getElementDuration() {
                switch(this.currentElement) {
                    case 'cryo': return 6 + Math.random() * 2;
                    case 'geo': return 5 + Math.random() * 1;
                    case 'dendro': return 8 + Math.random() * 2;
                    default: return 6;
                }
            }

            startParticles() {
                this.isActive = true;
                this.particleInterval = setInterval(() => {
                    if (this.particles.length < 12) {
                        this.createParticle();
                    }
                }, 600);
            }

            stopParticles() {
                this.isActive = false;
                if (this.particleInterval) {
                    clearInterval(this.particleInterval);
                }
                this.clearParticles();
            }

            clearParticles() {
                this.particles.forEach(particle => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                });
                this.particles = [];
            }
        }

        // Initialize dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Check desktop mode requirements first
            checkDesktopMode();
            
            // Start loading simulation
            simulateLoading();
            
            // Initialize particle system
            const particlesContainer = document.getElementById('particles-container');
            const particleSystem = new ParticleSystem(particlesContainer);
            
            // Data for carousel
            const slides = [
                {
                    heading: "Wanderer",
                    subheading: "She is a student in the Ratuwahist Darshan,<br> specializing in Theoretical Astrology.",
                    imageUrl: "assets/images/banner.webp",
                    heroImage: "assets/images/hero.webp",
                    horizontalBannerImage: "assets/images/comment.webp",
                    characterVoice: "Hello, I'm Layla, a student from Sumeru Akademiya. The stars guide my path through endless studies.",
                    element: "cryo",
                    characterCode: "VX: WAN-001",
                    stats: [
                        { label: "攻击", value: 2500, percentage: 85 },
                        { label: "防御", value: 2080, percentage: 70 },
                        { label: "体力", value: 2690, percentage: 90 },
                        { label: "生命", value: 2700, percentage: 92 }
                    ],
                    horizontalImage: {
                        image: "assets/images/banner.webp",
                        title: "Wanderer Studies",
                        description: "Discover the academic life and Cryo abilities of Sumeru's dedicated student and astronomer"
                    },
                    additionalImage: "assets/images/widget.webp",
                    searchChips: [
                        "Wanderer ascension material",
                        "Wanderer build",
                        "Kalpalata lotus locations", 
                        "Wanderer cosplay",
                        "Wanderer Wallpaper",
                        "Cryo support guide"
                    ],
                    infoCards: [
                        {
                            img: "assets/images/anemo.webp",
                            title: "Anemo",
                            description: "Anemo is one of the seven regions of Teyvat. It is the nation that worships ice and controls the element of Cryo.",
                            className: "glass-card"
                        },
                        {
                            img: "assets/images/sumeru.webp", 
                            title: "Sumeru",
                            description: "Sumeru is one of the seven regions of Teyvat. It is the nation that worships knowledge and controls the element of Dendro.",
                            className: ""
                        },
                        {
                            img: "assets/images/aka.webp",
                            title: "Akademiya", 
                            description: "The Sumeru Akademiya is Sumeru's main governing body, as well as the major prestigious institute in all of Teyvat.",
                            className: ""
                        }
                    ]
                },
                {
                    heading: "Navia",
                    subheading: "A world of adventure, elemental reactions, and rich lore.",
                    imageUrl: "assets/images/banner2.webp",
                    heroImage: "assets/images/hero2.webp",
                    horizontalBannerImage: "assets/images/coment2.webp",
                    characterVoice: "I am Yun Jin, an opera performer from Liyue. My art flows like the wind, bringing stories to life.",
                    element: "geo",
                    characterCode: "VX: NAV-002",
                    stats: [
                        { label: "攻击", value: 2750, percentage: 95 },
                        { label: "防御", value: 1980, percentage: 65 },
                        { label: "体力", value: 2450, percentage: 80 },
                        { label: "生命", value: 2850, percentage: 98 }
                    ],
                    horizontalImage: {
                        image: "assets/images/banner2.webp",
                        title: "Navia Chronicles",
                        description: "Experience the beautiful opera performances and Geo abilities of Liyue's talented performer"
                    },
                    additionalImage: "assets/images/widget2.webp",
                    searchChips: [
                        "Navia build guide",
                        "Opera singer Liyue",
                        "Geo support characters",
                        "Navia artifacts",
                        "Traditional Liyue music",
                        "Performance arts Teyvat"
                    ],
                    infoCards: [
                        {
                            img: "assets/images/geo.webp",
                            title: "Geo Element",
                            description: "Navia is a Geo character who excels in providing support through her unique abilities and elemental resonance.",
                            className: "glass-card"
                        },
                        {
                            img: "assets/images/Fontaine.webp",
                            title: "Fontaine",
                            description: "As an opera singer from Liyue, Navia brings cultural richness and artistic flair to the battlefield.",
                            className: ""
                        },
                        {
                            img: "assets/images/lana.webp",
                            title: "Liyue",
                            description: "Her abilities focus on supporting teammates and enhancing their combat effectiveness through various buffs.",
                            className: ""
                        }
                    ]
                },
                {
                    heading: "Alhaitham",
                    subheading: "The City of Wisdom, the nation of Dendro and scholarship.",
                    imageUrl: "assets/images/banner3.webp", 
                    heroImage: "assets/images/hero3.webp",
                    horizontalBannerImage: "assets/images/comment3.webp",
                    characterVoice: "Greetings. I am Alhaitham, Grand Sage of Sumeru Akademiya. Knowledge is the greatest pursuit in life.",
                    element: "dendro",
                    characterCode: "VX: ALH-003",
                    stats: [
                        { label: "攻击", value: 2650, percentage: 88 },
                        { label: "防御", value: 2250, percentage: 75 },
                        { label: "体力", value: 2580, percentage: 86 },
                        { label: "生命", value: 2900, percentage: 100 }
                    ],
                    horizontalImage: {
                        image: "assets/images/banner3.webp",
                        title: "Alhaitham Research",
                        description: "Delve into advanced Dendro research and scholarly pursuits in the halls of Sumeru Akademiya"
                    },
                    additionalImage: "assets/images/widget3.webp",
                    searchChips: [
                        "Alhaitham character analysis",
                        "Dendro element mastery",
                        "Sumeru scholars",
                        "Research methods Akademiya",
                        "Elemental reactions guide",
                        "Wisdom of Teyvat"
                    ],
                    infoCards: [
                        {
                            img: "assets/images/dendro.webp",
                            title: "Dendro Vision",
                            description: "Alhaitham harnesses the power of Dendro, bringing nature's wisdom and growth to combat situations.",
                            className: "glass-card"
                        },
                        {
                            img: "assets/images/Sumeru2.webp",
                            title: "Scholarly Pursuit", 
                            description: "A dedicated researcher focused on advancing knowledge and understanding of Teyvat's mysteries.",
                            className: ""
                        },
                        {
                            img: "assets/images/haravatat.webp",
                            title: "Elemental Mastery",
                            description: "Specializes in elemental reactions and combinations, making him invaluable in diverse team compositions.",
                            className: ""
                        }
                    ]
                }
            ];

            // DOM Elements
            const heroHeading = document.querySelector('.hero-heading');
            const heroSubheading = document.querySelector('.hero-subheading');
            const heroContainer = document.querySelector('.hero-container');
            const heroImage = document.querySelector('.hero-image');
            const leftArrow = document.querySelector('.arrow-nav.left');
            const rightArrow = document.querySelector('.arrow-nav.right');
            const dots = document.querySelectorAll('.dot');
            const iconCards = document.querySelectorAll('.icon-card');
            const infoCardsContainer = document.getElementById('info-cards-container');
            const searchChipsContainer = document.getElementById('search-chips-container');
            const horizontalBanner = document.getElementById('horizontal-banner');
            const horizontalImageSection = document.getElementById('horizontal-image-section');
            const horizontalImageCard = document.getElementById('horizontal-image-card');
            const additionalImageSection = document.getElementById('additional-image-section');
            const voiceCharacterBtn = document.getElementById('voice-character-btn');
            
            // Stat Bar Elements
            const statBarContainer = document.getElementById('stat-bar-container');
            const statCharacterName = document.getElementById('stat-character-name');
            const statCharacterCode = document.getElementById('stat-character-code');
            const statBars = document.getElementById('stat-bars');

            let currentSlide = 0;
            let isTransitioning = false;
            let preloadedImages = new Map();
            let isVoicePlaying = false;
            let currentAudio = null;
            
            // Preload images
            function preloadAllImages() {
                slides.forEach((slide, index) => {
                    if (!preloadedImages.has(slide.heroImage)) {
                        const img = new Image();
                        img.src = slide.heroImage;
                        preloadedImages.set(slide.heroImage, img);
                    }
                });
            }
            
            // Voice functions - ENHANCED
            function stopCurrentVoice() {
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                    currentAudio = null;
                }
                isVoicePlaying = false;
                voiceCharacterBtn.classList.remove('playing');
                voiceCharacterBtn.innerHTML = '🎤';
            }
            
            async function playCharacterVoice(text, forcePlay = false) {
                if (isVoicePlaying && !forcePlay) {
                    console.log('Voice already playing, skipping...');
                    return;
                }
                
                if (!window.Poe) {
                    console.log('Poe API not available');
                    return;
                }
                
                stopCurrentVoice();
                
                isVoicePlaying = true;
                voiceCharacterBtn.classList.add('playing');
                voiceCharacterBtn.innerHTML = '🔊';
                
                console.log('Playing character voice:', text);
                
                try {
                    let voiceName = 'Sarah';
                    
                    switch(currentSlide) {
                        case 0: voiceName = 'Jessica'; break;
                        case 1: voiceName = 'Lily'; break;
                        case 2: voiceName = 'George'; break;
                    }
                    
                    await window.Poe.sendUserMessage(
                        `@ElevenLabs-v2.5-Turbo ${text} --voice ${voiceName}`,
                        {
                            handler: "voice-handler",
                            stream: false,
                            openChat: false,
                            handlerContext: { 
                                slideIndex: currentSlide,
                                voiceName: voiceName,
                                originalText: text
                            }
                        }
                    );
                } catch (error) {
                    console.error('Error playing character voice:', error);
                    stopCurrentVoice();
                }
            }
            
            // Register voice handler
            if (window.Poe) {
                window.Poe.registerHandler("voice-handler", (result, context) => {
                    console.log('Voice handler called:', result.status, context);
                    const response = result.responses[0];
                    
                    if (response.status === "complete") {
                        if (response.attachments && response.attachments.length > 0) {
                            const audioAttachment = response.attachments[0];
                            currentAudio = new Audio(audioAttachment.url);
                            
                            currentAudio.addEventListener('loadstart', () => {
                                console.log('Audio loading started');
                            });
                            
                            currentAudio.addEventListener('canplay', () => {
                                console.log('Audio can start playing');
                            });
                            
                            currentAudio.addEventListener('ended', () => {
                                console.log('Audio playback ended');
                                stopCurrentVoice();
                            });
                            
                            currentAudio.addEventListener('error', (e) => {
                                console.error('Audio playback error:', e);
                                stopCurrentVoice();
                            });
                            
                            currentAudio.play().then(() => {
                                console.log('Audio playing successfully');
                            }).catch(error => {
                                console.error('Audio play failed:', error);
                                stopCurrentVoice();
                            });
                        } else {
                            console.log('No audio attachment received');
                            stopCurrentVoice();
                        }
                    } else if (response.status === "error") {
                        console.error('Voice generation error:', response.statusText);
                        stopCurrentVoice();
                    }
                });
            }
            
            voiceCharacterBtn.addEventListener('click', () => {
                if (!isVoicePlaying) {
                    const currentSlideData = slides[currentSlide];
                    playCharacterVoice(currentSlideData.characterVoice, true);
                } else {
                    stopCurrentVoice();
                }
            });

            // Update stat bar
            function updateStatBar() {
                const slide = slides[currentSlide];
                
                statCharacterName.textContent = slide.heading.toUpperCase();
                statCharacterCode.textContent = slide.characterCode || `VX: ${slide.heading.slice(0,3).toUpperCase()}-${currentSlide + 1}`;
                
                statBars.innerHTML = '';
                
                slide.stats.forEach((stat, index) => {
                    const statItem = document.createElement('div');
                    statItem.className = 'stat-item';
                    statItem.innerHTML = `
                        <div class="stat-label">${stat.label}</div>
                        <div class="stat-bar-bg">
                            <div class="stat-bar-fill" data-width="${stat.percentage}%" style="width: 0%;"></div>
                        </div>
                        <div class="stat-value">${stat.value}</div>
                    `;
                    statBars.appendChild(statItem);
                    
                    setTimeout(() => {
                        const fillBar = statItem.querySelector('.stat-bar-fill');
                        fillBar.style.width = stat.percentage + '%';
                    }, 300 + (index * 100));
                });
            }

            // Update icon cards
            function updateIconCards() {
                iconCards.forEach((card, index) => {
                    card.classList.remove('highlighted', 'dimmed', 'show-close');
                });
                
                let activeCards = [];
                switch(currentSlide) {
                    case 0: activeCards = [0, 1]; break;
                    case 1: activeCards = [2, 3]; break;
                    case 2: activeCards = [4, 5]; break;
                }
                
                iconCards.forEach((card, index) => {
                    if (activeCards.includes(index)) {
                        card.classList.add('highlighted');
                        if (currentSlide === 0) {
                            card.classList.add('show-close');
                        }
                    } else {
                        card.classList.add('dimmed');
                    }
                });
            }

            // Update search chips
            function updateSearchChipsSmooth() {
                const slide = slides[currentSlide];
                searchChipsContainer.innerHTML = '';
                slide.searchChips.forEach((chipText, index) => {
                    const searchChip = document.createElement('a');
                    searchChip.className = 'search-chip';
                    searchChip.href = '#';
                    searchChip.setAttribute('role', 'listitem');
                    searchChip.innerHTML = `
                        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        ${chipText}
                    `;
                    searchChipsContainer.appendChild(searchChip);
                    
                    searchChip.addEventListener('click', (e) => {
                        e.preventDefault();
                        searchChipsContainer.querySelectorAll('.search-chip').forEach(c => c.classList.remove('active'));
                        searchChip.classList.add('active');
                    });
                });
            }

            // Update horizontal images
            function updateHorizontalImageSmooth() {
                const slide = slides[currentSlide];
                const bannerImg = horizontalBanner.querySelector('.banner-image');
                bannerImg.src = slide.horizontalBannerImage;
                
                horizontalImageCard.innerHTML = `
                    <img src="${slide.horizontalImage.image}" alt="${slide.horizontalImage.title}" loading="lazy">
                    <div class="horizontal-image-overlay">
                        <h3>${slide.horizontalImage.title}</h3>
                        <p>${slide.horizontalImage.description}</p>
                    </div>
                `;
            }

            // Update additional image
            function updateAdditionalImageSmooth() {
                const slide = slides[currentSlide];
                additionalImageSection.innerHTML = `
                    <img src="${slide.additionalImage}" alt="Additional Image for ${slide.heading}" loading="lazy">
                `;
            }

            // Update info cards
            function updateInfoCardsSmooth() {
                const slide = slides[currentSlide];
                infoCardsContainer.innerHTML = '';
                slide.infoCards.forEach((cardData, index) => {
                    const infoCard = document.createElement('div');
                    infoCard.className = `info-card ${cardData.className}`;
                    infoCard.innerHTML = `
                        <img src="${cardData.img}" alt="${cardData.title}" class="info-img" loading="lazy">
                        <div class="info-text">
                            <div class="info-title">${cardData.title}</div>
                            <div class="info-description">${cardData.description}</div>
                            <div class="share-buttons">
                                <a href="#" class="share-btn twitter" title="Share on Twitter"><i class="fab fa-twitter"></i></a>
                                <a href="#" class="share-btn facebook" title="Share on Facebook"><i class="fab fa-facebook"></i></a>
                                <a href="#" class="share-btn whatsapp" title="Share on WhatsApp"><i class="fab fa-whatsapp"></i></a>
                            </div>
                        </div>
                    `;
                    infoCardsContainer.appendChild(infoCard);
                });
                
                addShareButtonListeners();
            }

            // Main update slide function
            function updateSlide() {
                if (isTransitioning) return;
                isTransitioning = true;
                const slide = slides[currentSlide];
                
                stopCurrentVoice();
                
                setElementTheme(slide.element);
                particleSystem.setElement(slide.element);
                if (!particleSystem.isActive) {
                    particleSystem.startParticles();
                }
                
                const preloadedImg = preloadedImages.get(slide.heroImage);
                if (preloadedImg && preloadedImg.complete) {
                    performHeroTransition(slide);
                } else {
                    const newImage = new Image();
                    newImage.onload = () => {
                        performHeroTransition(slide);
                    };
                    newImage.src = slide.heroImage;
                }
                
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentSlide);
                });
                
                updateIconCards();
                updateStatBar();
                updateInfoCardsSmooth();
                updateSearchChipsSmooth();
                updateHorizontalImageSmooth();
                updateAdditionalImageSmooth();
                
                setTimeout(() => {
                    if (window.Poe && slide.characterVoice) {
                        playCharacterVoice(slide.characterVoice);
                    }
                }, 1000);
            }

            // Hero transition function
            function performHeroTransition(slide) {
                heroImage.classList.remove('slide-right', 'slide-left', 'slide-up');
                heroImage.style.opacity = '0';
                
                setTimeout(() => {
                    heroContainer.style.backgroundImage = `url('${slide.imageUrl}')`;
                    heroImage.src = slide.heroImage;
                    heroImage.alt = `${slide.heading} character image`;
                    heroHeading.textContent = slide.heading;
                    heroSubheading.innerHTML = slide.subheading;
                    
                    let animationClass = '';
                    switch(currentSlide) {
                        case 0: animationClass = 'slide-right'; break;
                        case 1: animationClass = 'slide-left'; break;
                        case 2: animationClass = 'slide-up'; break;
                        default: animationClass = 'slide-right';
                    }
                    
                    heroImage.style.opacity = '1';
                    heroImage.classList.add(animationClass);
                    isTransitioning = false;
                }, 150);
            }

            // Navigation event listeners
            leftArrow.addEventListener('click', () => {
                if (!isTransitioning) {
                    currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                    updateSlide();
                }
            });

            rightArrow.addEventListener('click', () => {
                if (!isTransitioning) {
                    currentSlide = (currentSlide + 1) % slides.length;
                    updateSlide();
                }
            });

            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    if (!isTransitioning && currentSlide !== index) {
                        currentSlide = index;
                        updateSlide();
                    }
                });
            });

            // Parallax effect
            window.addEventListener('scroll', () => {
                const scrollPos = window.scrollY;
                heroContainer.style.backgroundPositionY = `${scrollPos * 0.5}px`;
            });

            // Dark/Light mode toggle
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');

            function setDarkMode(isDark) {
                document.body.classList.toggle('dark-mode', isDark);
                localStorage.setItem('dark-mode', isDark);
                darkModeToggle.textContent = isDark ? '☀️' : '🌙';
            }

            const savedMode = localStorage.getItem('dark-mode');
            if (savedMode !== null) {
                setDarkMode(savedMode === 'true');
            } else {
                setDarkMode(prefersDarkMode.matches);
            }

            darkModeToggle.addEventListener('click', () => {
                const isDark = document.body.classList.contains('dark-mode');
                setDarkMode(!isDark);
            });

            // IntersectionObserver for animations
            let observer;

            function createObserver() {
                if (observer) {
                    observer.disconnect();
                }
                observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach((entry, index) => {
                        if (entry.isIntersecting) {
                            setTimeout(() => {
                                entry.target.classList.add('is-visible');
                            }, index * 150);
                            observer.unobserve(entry.target);
                        }
                    });
                }, {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                });

                const animatedElements = document.querySelectorAll(`
                    .animate-from-left:not(.is-visible), 
                    .animate-fade-down:not(.is-visible), 
                    .animate-scale-fade:not(.is-visible), 
                    .animate-slide-right:not(.is-visible), 
                    .animate-stagger-up:not(.is-visible), 
                    .footer-section:not(.is-visible)
                `);
                animatedElements.forEach(el => observer.observe(el));
            }

            createObserver();

            // Replay animations function
            function replayAnimations() {
                const animatedElements = document.querySelectorAll(`
                    .animate-from-left, 
                    .animate-fade-down, 
                    .animate-scale-fade, 
                    .animate-slide-right, 
                    .animate-stagger-up, 
                    .footer-section
                `);
                animatedElements.forEach(el => {
                    el.classList.remove('is-visible');
                });

                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });

                setTimeout(() => {
                    createObserver();
                }, 500);

                const replayBtn = document.getElementById('replay-animations');
                replayBtn.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    replayBtn.style.transform = 'scale(1)';
                }, 200);
            }

            document.getElementById('replay-animations').addEventListener('click', replayAnimations);

            // Back-to-top button
            const backToTopBtn = document.getElementById('back-to-top');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopBtn.style.display = 'flex';
                } else {
                    backToTopBtn.style.display = 'none';
                }
            });

            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Lightbox functionality
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = lightbox.querySelector('.lightbox-content');
            const artworkCards = document.querySelectorAll('.artwork-card');

            artworkCards.forEach(card => {
                card.addEventListener('click', () => {
                    lightboxImg.src = card.dataset.lightboxSrc;
                    lightbox.classList.add('active');
                });
            });

            lightbox.addEventListener('click', (e) => {
                if (e.target.classList.contains('lightbox') || e.target.classList.contains('lightbox-close')) {
                    lightbox.classList.remove('active');
                }
            });

            // 3D Tilt Effect
            function addTiltEffect() {
                const tiltCards = document.querySelectorAll('.info-card, .horizontal-image-card, .additional-image-section, .stat-bar-container');
                tiltCards.forEach(card => {
                    card.addEventListener('mousemove', (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        const centerX = rect.width / 2;
                        const centerY = rect.height / 2;
                        const rotateX = ((centerY - y) / centerY) * 10;
                        const rotateY = ((x - centerX) / centerX) * 10;
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                    });
                    card.addEventListener('mouseleave', () => {
                        card.style.transform = `perspective(1000px) rotateX(0) rotateY(0)`;
                    });
                });
            }

            // Search bar
            const searchBar = document.getElementById('search-bar');
            const suggestionsContainer = document.getElementById('search-suggestions');
            const searchSuggestions = [
                'Layla', 'Layla build', 'Layla ascension material', 'Layla team',
                'Genshin Impact', 'Sumeru', 'Akademiya', 'Cryo characters'
            ];

            searchBar.addEventListener('input', () => {
                const query = searchBar.value.toLowerCase();
                suggestionsContainer.innerHTML = '';
                if (query.length > 0) {
                    const filteredSuggestions = searchSuggestions.filter(s => s.toLowerCase().includes(query));
                    if (filteredSuggestions.length > 0) {
                        filteredSuggestions.forEach(s => {
                            const link = document.createElement('a');
                            link.href = `#`;
                            link.textContent = s;
                            suggestionsContainer.appendChild(link);
                        });
                        suggestionsContainer.style.display = 'block';
                    } else {
                        suggestionsContainer.style.display = 'none';
                    }
                } else {
                    suggestionsContainer.style.display = 'none';
                }
            });

            document.addEventListener('click', (e) => {
                if (!searchBar.contains(e.target) && !suggestionsContainer.contains(e.target)) {
                    suggestionsContainer.style.display = 'none';
                }
            });

            // Hover sound effect
            const hoverSound = document.getElementById('hover-sound');
            const hoverElements = document.querySelectorAll('.btn, .nav-link, .artwork-card, .search-chip, .icon-card, .info-card, .arrow-nav, .horizontal-image-card, .social-link, .footer-link, .voice-character-btn, .stat-bar-container');
            hoverElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    hoverSound.currentTime = 0;
                    hoverSound.play().catch(() => {});
                });
            });

            // Background music
            const audioToggle = document.getElementById('audio-toggle');
            const backgroundMusic = document.getElementById('background-music');
            backgroundMusic.volume = 0.2;
            let isPlaying = false;

            audioToggle.addEventListener('click', () => {
                if (isPlaying) {
                    backgroundMusic.pause();
                    audioToggle.textContent = '🔇';
                } else {
                    backgroundMusic.play().catch(() => {});
                    audioToggle.textContent = '🔊';
                }
                isPlaying = !isPlaying;
            });

            // Share buttons functionality
            function addShareButtonListeners() {
                const shareButtons = document.querySelectorAll('.share-buttons a');
                shareButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const url = encodeURIComponent(window.location.href);
                        const title = encodeURIComponent(document.title);
                        let shareUrl = '';
                        if (btn.classList.contains('twitter')) {
                            shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
                        } else if (btn.classList.contains('facebook')) {
                            shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                        } else if (btn.classList.contains('whatsapp')) {
                            shareUrl = `https://api.whatsapp.com/send?text=${title} ${url}`;
                        }
                        window.open(shareUrl, '_blank');
                    });
                });
            }

            // Close button functionality
            const closeButtons = document.querySelectorAll('.close-btn');
            closeButtons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const card = btn.closest('.icon-card');
                    card.style.transform = 'scale(0)';
                    card.style.opacity = '0';
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 300);
                });
            });

            // Footer feedback button
            const feedbackBtn = document.getElementById('feedback-btn');
            feedbackBtn.addEventListener('click', () => {
                const modal = document.createElement('div');
                modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;';
                modal.innerHTML = `
                    <div style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.2); max-width: 400px; width: 90%; margin: 16px;">
                        <h3 style="font-size: 18px; font-weight: 600; color: #333; margin-bottom: 16px;">Send Feedback</h3>
                        <p style="color: #666; margin-bottom: 20px;">Thank you for your interest! Feedback feature will be implemented soon.</p>
                        <div style="display: flex; justify-content: flex-end;">
                            <button style="background: #5D5CDE; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;" onclick="this.closest('div[style*=&quot;position: fixed&quot;]').remove()">OK</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
                
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.remove();
                    }
                });
            });

            // Initialize
            setTimeout(() => {
                preloadAllImages();
                updateSlide();
                addTiltEffect();
                addShareButtonListeners();
            }, 100);
        });
    </script>
</body>
</html> 